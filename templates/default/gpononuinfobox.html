<!--// $Id: gpononuinfobox.html,v 1.27 2012/05/07 09:23:00 DK Exp $ //-->
{$xajax}
<TABLE WIDTH="100%" CELLPADDING="3">
	<TR {if $devicepanel} class="dark hand" onClick="showOrHide('devicepanel');"{else} class="dark"{/if}>
		<TD WIDTH="1%" class="fleftu">
			<IMG SRC="img/gpononu.gif" ALT="">
		</TD>
		<TD WIDTH="99%" class="frightu">
			<B>{$netdevinfo.name} ({$netdevinfo.id|string_format:"%04d"})</B>
		</TD>
	</TR>
	
	<TR class="light"{if $devicepanel} id="devicepanel" style="display:none;"{/if}>
	        <TD WIDTH="100%" COLSPAN="2"{if $devicepanel} class="fall" ALIGN="RIGHT"{else}class="flr"{/if}>
			<TABLE WIDTH="100%" CELLPADDING="0">
				<TR class="light">
					<TD WIDTH="50%" style="vertical-align:top;">
						<TABLE WIDTH="100%" CELLPADDING="3">
						<TR class="light">
		<TD WIDTH="1%">
			 <IMG SRC="img/gpononu.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
		        <B>ONU ID:</B>
		</TD>
		<TD WIDTH="98%">
		       <b>{$netdevinfo.onuid}</b>
		</TD>
	</TR>
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/settings.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>Wydany do klienta:</B>
		</TD>
		<TD WIDTH="98%">
		{if $netdevinfo.autoprovisioning eq 1} Tak {else}  Nie {/if}
		</TD>
	</TR>
	 <TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/settings.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>Profil:</B>
		</TD>
		<TD WIDTH="98%">
			{$netdevinfo.profil_olt}
		</TD>
	</TR>
	
						{if $netdevinfo.producer}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/producer.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
		        <B>{trans("Producer:")}</B>
		</TD>
		<TD WIDTH="98%">
		        {$netdevinfo.producer}
		</TD>
	</TR>
	{/if}
	{if $netdevinfo.model}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/gpononu_model.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
		        <B>{trans("Model:")}</B>
		</TD>
		<TD WIDTH="98%">
		        {$netdevinfo.model}
		</TD>
	</TR>
	{/if}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/passwd.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
		        <B>{trans("Password:")}</B>
		</TD>
		<TD WIDTH="98%">
		        {if $netdevinfo.password eq ''}(auto-learning){else}{$netdevinfo.password}{/if}
		</TD>
	</TR>
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/gpononu.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
			<B>ONU description:</B>
		<TD WIDTH="98%">
		{$netdevinfo.onudescription}
		</TD>
	</TR>
	{if $netdevinfo.serialnumber}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/serialnumber.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
		        <B>{trans("Serial number:")}</B>
		</TD>
		<TD WIDTH="98%">
		        {$netdevinfo.serialnumber}
		</TD>
	</TR>
	{/if}
	{if $netdevinfo.location}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/home.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>{trans("Location:")}</B>
		</TD>
		<TD WIDTH="98%">
			{$netdevinfo.location}
		</TD>
	</TR>
	{/if}
	{if $onuports}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/gpononu_takenports.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>Porty wyłaczone:</B>
		</TD>
		<TD WIDTH="98%" id="ONU_Host_id" align="left">
			    {foreach from=$onuports item=onuport}
				{$onuport.name}.{$onuport.portid} <br>
			    {/foreach}
		</TD>
	</TR>
	{/if}

	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/customer.gif" ALT="{trans("Customer:")}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
		<ol>
			{foreach from=$gpononu2customers item=c}
				<li><a href="?m=customerinfo&id={$c.customersid}">{$c.customersname}</a></li>
				{/foreach}
				</ol>
		</TD>
	</TR>                      	</TABLE>
	<table  id="show_voip">
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/voip.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>VoIP:</B>
		</TD>
		<TD WIDTH="98%" id="ONU_Voip_Phone" align="left">
		    {if $netdevinfo.potsports == 2}
			<table>
			<tr><td align="right">1.</td><td>{$netdevinfo.voipaccountsid1_phone}</td></tr>
			<tr><td align="right">2.</td><td>{$netdevinfo.voipaccountsid2_phone}</td></tr>
			</table>
		    {else}
			Brak portów voip w tym modelu
		    {/if}
		</TD>
	</TR>
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/node.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>Host:</B>
		</TD>
		<TD WIDTH="98%" id="ONU_Host_id" align="left">
			<table>
			<tr><td align="right">1.</td><td>{$netdevinfo.host_id1_host}</td></tr>
			<tr><td align="right">2.</td><td>{$netdevinfo.host_id2_host}</td></tr>
			</table>
		</TD>
	</TR> 
	{if $onulastauth}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/radius.gif" ALT="">
		</TD>
		<TD WIDTH="99%" NOWRAP colspan="2">
			<B>Ostatnie autoryzacje radius:</B>
		</TD>
	</tr>
	<TR class="light">
	    <td colspan="3">
		<table border="1" CELLPADDING="3">
		<tr class="dark">
		    <td align="center">Czas:</td><td align="center">NAS IP:</td><td align="center">Olt Id:</td><td align="center">Onu Id:</td><td align="center">Version:</td>
		</tr>
		{section name=onulastauth loop=$onulastauth max=15} {* jest sens to konfigurowac? *}
		    <tr>
			<td>{$onulastauth[onulastauth].time}</td>
			<td>{$onulastauth[onulastauth].nas}</td>
			<td align="right">{$onulastauth[onulastauth].oltport}</td>
			<td align="right">{$onulastauth[onulastauth].onuoltid}</td>
			<td>{$onulastauth[onulastauth].version}</td>
		    </tr>
		{/section}
		</table>
	    </td>
	</TR>
	{/if}
		</TABLE>
				</TD>
				<TD WIDTH="50%" style="vertical-align:top;">
				        <TABLE WIDTH="100%" CELLPADDING="3">
	{if $netdevinfo.purchasetime}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/calendar.gif" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
		        <B>{trans("Purchase date:")}</B>
		</TD>
		<TD WIDTH="98%">
		        {$netdevinfo.purchasetime|date_format:"%Y/%m/%d"}
		</TD>
	</TR>
	{/if}
	<TR class="light">
		<TD WIDTH="1%">
			<IMG SRC="img/guarantee.png" ALT="">
		</TD>
		<TD WIDTH="1%" NOWRAP>
		        <B>{trans("Guarantee:")}</B>
		</TD>
		<TD WIDTH="98%">
			{if !$netdevinfo.guaranteeperiod}
				{trans("no guarantee")}
			{elseif $netdevinfo.guaranteeperiod == -1}
				{trans("lifetime")}
			{else}
				{assign var=periodid value=$netdevinfo.guaranteeperiod}
				{$_GUARANTEEPERIODS.$periodid}
		        	({if $netdevinfo.guaranteetime-$smarty.now < 0}{trans("expired<!guarantee>")}{else}{$netdevinfo.guaranteetime|date_format:"%Y/%m/%d"}{/if})
			{/if}
		</TD>
	</TR>
        {if $netdevinfo.description}
        <TR class="light">
                <TD WIDTH="1%">
                        <IMG SRC="img/desc.gif" ALT="">
                </TD>
                <TD WIDTH="99%" COLSPAN="2">
                        <TABLE WIDTH="100%" CELLPADDING="5">
                                <TR>
                                        <TD class="fall superlight">
						{$netdevinfo.description|escape|replace:"\n":"<BR>"}
                                        </TD>
                                </TR>
                        </TABLE>
                </TD>
        </TR>
        {/if}
        <TR class="light">
                <TD WIDTH="1%">
                        <IMG SRC="img/users.gif" ALT="">
                </TD>
                <TD WIDTH="1%" NOWRAP>
                        <B>{trans("Created:")}<BR>
                        {trans("Modified:")}</B>
                </TD>
                <TD WIDTH="98%">
                        {if $netdevinfo.creationdate}{$netdevinfo.createdby}, {$netdevinfo.creationdateh}{else} ? {/if}<BR>
                        {if $netdevinfo.moddate}{$netdevinfo.modifiedby}, {$netdevinfo.moddateh}{else}-{/if}
                </TD>
        </TR>

        {if $netdevinfo.gponoltid gt 0}
	<TR class="light">
		<TD WIDTH="100%" COLSPAN="3">
		    Historia sygnału 1490nm/<font color="#00c080">1310nm</font> odbieranego na ONU/OLT (RxPower):
			{if $netdevinfo.rrd == 1}
			    <a href="?m=gpononuinfo&id={$netdevinfo.id}&rrd=0"> <img src="?m=gpononusignalimage&id={$netdevinfo.id}" alt="wykres sygnału" /></a>  
			{else}
			    <a href="?m=gpononuinfo&id={$netdevinfo.id}&rrd=1"> <img src="?m=gpononusignalimage&id={$netdevinfo.id}" alt="wykres sygnału" /></a>  
			{/if}
		</TD>
	</TR>
	{if ConfigHelper::getConfig('phpui.gpon_use_radius')}
	<TR class="light">
	    <TD WIDTH="1%">
		<IMG SRC="img/radius.gif" ALT="">
	    </TD>
	    <td WIDTH="100%" COLSPAN="2">
		<a href="?m=gpononuDM&id={$netdevinfo.id}" onclick="if(!confirm('Czy napewno chcesz rozłączyc ONU?')) return false;"> Rozłącz ONU</a>
	    </td>
	</tr>
	{/if}
        <TR class="light">
                <TD WIDTH="100%" COLSPAN="3">
                        <input type="button" value="Pokaż parametry" id="pokaz_parametry_{$netdevinfo.id}" OnClick="xajax_ONU_get_param_Xj({$netdevinfo.gponoltid},{$netdevinfo.gponoltnumport},{$netdevinfo.onuid},{$netdevinfo.id},'{$netdevinfo.name}');" /> <input style="display:none;" type="button" value="Odśwież parametry" id="odswiez_parametry_{$netdevinfo.id}" OnClick="xajax_ONU_get_param_Xj({$netdevinfo.gponoltid},{$netdevinfo.gponoltnumport},{$netdevinfo.onuid},{$netdevinfo.id},'{$netdevinfo.name}');" />
                        <div id="ONU_param_{$netdevinfo.id}"></div>
                </TD>
        </TR>
        {/if}
	                                        </TABLE>
					</TD>
				</TR>
			</TABLE>
{if !$devicepanel}
    		</TD>
	</TR>
	<TR class="light">
	        <TD WIDTH="100%" COLSPAN="2" class="fbottomu" ALIGN="RIGHT">
{/if}
			<A href="?m=gpononuedit&id={$netdevinfo.id}" ACCESSKEY="E">{trans("Edit")} <IMG src="img/edit.gif" ALT="[ {trans("Edit")} ]"></A>
			<A href="?m=gpononudel&id={$netdevinfo.id}" OnClick="return confirmLink(this, '{t a=$netdevinfo.name}Are you sure, you want to remove device \'$a\' from database?{/t}');">{trans("Delete")} <img src="img/delete.gif" ALT=""></A>
		</TD>
	</TR>
</TABLE>
{if $devicepanel}
{literal}<SCRIPT type="text/javascript">
<!--
if(getCookie('devicepanel')=='1')
{
        document.getElementById('devicepanel').style.display = '';
}
//-->
</SCRIPT>{/literal}
{/if}
